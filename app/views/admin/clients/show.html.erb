<div class="p-6 space-y-6">
  <!-- Header -->
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Client Details</h1>
      <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">View client information and associated data</p>
    </div>
    <div class="flex space-x-3">
      <%= link_to "Edit Client", edit_admin_client_path(@client), 
          class: "px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" %>
      <%= link_to "Back to Clients", admin_clients_path, 
          class: "px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600" %>
    </div>
  </div>

  <!-- Client Information -->
  <div class="bg-white dark:bg-gray-800 shadow rounded-lg">
    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
      <h3 class="text-lg font-medium text-gray-900 dark:text-white">Client Information</h3>
    </div>
    <div class="p-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Company Name</label>
          <p class="text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-md border border-gray-200 dark:border-gray-600">
            <%= @client.company_name %>
          </p>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Personal Name</label>
          <p class="text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-md border border-gray-200 dark:border-gray-600">
            <%= @client.personal_name %>
          </p>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Phone Number</label>
          <p class="text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-md border border-gray-200 dark:border-gray-600">
            <%= @client.phone_number %>
          </p>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Created</label>
          <p class="text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-md border border-gray-200 dark:border-gray-600">
            <%= @client.created_at.strftime("%B %d, %Y at %I:%M %p") %>
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Image Uploader -->
  <div class="bg-white dark:bg-gray-800 shadow rounded-lg">
    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
      <h3 class="text-lg font-medium text-gray-900 dark:text-white">Client Information</h3>
    </div>
    <div class="p-6">
      <%= render 'shared/image_uploader', attachable: @client %>
    </div>
  </div>

  <!-- Main Address -->
  <div class="bg-white dark:bg-gray-800 shadow rounded-lg">
    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
      <h3 class="text-lg font-medium text-gray-900 dark:text-white">Main Address</h3>
    </div>
    <div class="p-6">
      <% if @client.address %>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="md:col-span-2">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Street</label>
            <div class="text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-md border border-gray-200 dark:border-gray-600 whitespace-pre-line">
              <%= @client.address.street %>
            </div>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">City</label>
            <p class="text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-md border border-gray-200 dark:border-gray-600">
              <%= @client.address.city %>
            </p>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">State</label>
            <p class="text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-md border border-gray-200 dark:border-gray-600">
              <%= @client.address.state %>
            </p>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Zip Code</label>
            <p class="text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-md border border-gray-200 dark:border-gray-600">
              <%= @client.address.zip_code %>
            </p>
          </div>
        </div>
      <% else %>
        <p class="text-sm text-gray-500 dark:text-gray-400">No main address recorded</p>
      <% end %>
    </div>
  </div>

  <!-- Shipping Address -->
  <div class="bg-white dark:bg-gray-800 shadow rounded-lg">
    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
      <h3 class="text-lg font-medium text-gray-900 dark:text-white">Shipping Address</h3>
    </div>
    <div class="p-6">
      <% if @client.shipping_address %>
        <% if @client.address && @client.shipping_address.street == @client.address.street && 
              @client.shipping_address.city == @client.address.city && 
              @client.shipping_address.state == @client.address.state && 
              @client.shipping_address.zip_code == @client.address.zip_code %>
          <div class="flex items-center mb-4">
            <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
            </svg>
            <p class="ml-2 text-sm text-gray-600 dark:text-gray-400">Same as main address</p>
          </div>
        <% end %>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="md:col-span-2">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Street</label>
            <div class="text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-md border border-gray-200 dark:border-gray-600 whitespace-pre-line">
              <%= @client.shipping_address.street %>
            </div>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">City</label>
            <p class="text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-md border border-gray-200 dark:border-gray-600">
              <%= @client.shipping_address.city %>
            </p>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">State</label>
            <p class="text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-md border border-gray-200 dark:border-gray-600">
              <%= @client.shipping_address.state %>
            </p>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Zip Code</label>
            <p class="text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-md border border-gray-200 dark:border-gray-600">
              <%= @client.shipping_address.zip_code %>
            </p>
          </div>
        </div>
      <% else %>
        <p class="text-sm text-gray-500 dark:text-gray-400">No shipping address recorded</p>
      <% end %>
    </div>
  </div>

  <!-- Associated Users -->
  <div class="bg-white dark:bg-gray-800 shadow rounded-lg">
    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
      <div class="flex items-center justify-between">
        <h3 class="text-lg font-medium text-gray-900 dark:text-white">Associated Users</h3>
        <%#= link_to "Add New User", new_admin_user_path(client_id: @client.id),
            class: "inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-600 dark:text-white dark:border-gray-500 dark:hover:bg-gray-700" %>
      </div>
    </div>
    <div class="p-6">
      <% if @client.users.any? %>
        <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
          <% @client.users.each_with_index do |user, index| %>
            <div class="flex items-center justify-between py-3 <%= 'border-b border-gray-200 dark:border-gray-600' unless index == @client.users.count - 1 %>">
              <div class="flex-1">
                <div class="flex items-center">
                  <div class="flex-shrink-0">
                    <div class="h-8 w-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center">
                      <span class="text-sm font-medium text-blue-600 dark:text-blue-300">
                        <%= user.email.first.upcase %>
                      </span>
                    </div>
                  </div>
                  <div class="ml-3">
                    <p class="text-sm font-medium text-gray-900 dark:text-white">
                      <%= user.email %>
                    </p>
                    <p class="text-xs text-gray-500 dark:text-gray-400">
                      Role: <%= user.role&.humanize || 'Client' %>
                      <% if user.last_sign_in_at %>
                        â€¢ Last signed in <%= time_ago_in_words(user.last_sign_in_at) %> ago
                      <% end %>
                    </p>
                  </div>
                </div>
              </div>
              <div class="flex items-center space-x-2">
                <%#= link_to "Edit", edit_admin_user_path(user),
                    class: "text-blue-600 hover:text-blue-800 text-sm font-medium" %>
                <%#= link_to "Delete", admin_user_path(user), method: :delete,
                    class: "text-red-600 hover:text-red-800 text-sm font-medium",
                    confirm: "Are you sure you want to delete this user?" %>
              </div>
            </div>
          <% end %>
        </div>
      <% else %>
        <div class="text-center py-8">
          <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48">
            <path d="M34 40h10v-4a6 6 0 00-10.712-3.714M34 40H14m20 0v-4a9.971 9.971 0 00-.712-3.714M14 40H4v-4a6 6 0 0110.713-3.714M14 40v-4c0-1.313.253-2.566.713-3.714m0 0A10.003 10.003 0 0124 26c4.21 0 7.813 2.602 9.288 6.286M30 14a6 6 0 11-12 0 6 6 0 0112 0zm12 6a4 4 0 11-8 0 4 4 0 018 0zm-28 0a4 4 0 11-8 0 4 4 0 018 0z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <h3 class="mt-2 text-sm font-medium text-gray-900 dark:text-white">No users</h3>
          <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Get started by adding a user for this client.</p>
          <div class="mt-6">
            <%#= link_to "Add New User", new_admin_user_path(client_id: @client.id),
                class: "inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" %>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Activity Log / Additional Info (Optional) -->
  <div class="bg-white dark:bg-gray-800 shadow rounded-lg">
    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
      <h3 class="text-lg font-medium text-gray-900 dark:text-white">Client Activity</h3>
    </div>
    <div class="p-6">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="text-center">
          <div class="text-2xl font-bold text-blue-600 dark:text-blue-400">
            <%= @client.users.count %>
          </div>
          <div class="text-sm text-gray-500 dark:text-gray-400">Associated Users</div>
        </div>
        <div class="text-center">
          <div class="text-2xl font-bold text-green-600 dark:text-green-400">
            <%= time_ago_in_words(@client.created_at) %>
          </div>
          <div class="text-sm text-gray-500 dark:text-gray-400">Client Since</div>
        </div>
        <div class="text-center">
          <div class="text-2xl font-bold text-purple-600 dark:text-purple-400">
            <%= time_ago_in_words(@client.updated_at) %>
          </div>
          <div class="text-sm text-gray-500 dark:text-gray-400">Last Updated</div>
        </div>
      </div>
    </div>
  </div>
</div>