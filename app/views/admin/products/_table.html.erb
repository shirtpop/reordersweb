<%= turbo_frame_tag "products_list" do %>
  <div class="px-4 sm:px-6 lg:px-8">
    <div class="bg-white dark:bg-gray-800 shadow-sm rounded-lg">
      <!-- Products Table -->
      <div id="products_table" class="relative overflow-x-auto">
        <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
          <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
            <tr>
              <th scope="col" class="px-6 py-3">Name</th>
              <th scope="col" class="px-6 py-3">Base Price</th>
              <th scope="col" class="px-6 py-3">Sizes</th>
              <th scope="col" class="px-6 py-3">Colors</th>
              <th scope="col" class="px-6 py-3">
                <span class="sr-only">Actions</span>
              </th>
            </tr>
          </thead>
          <tbody>
            <% if @products.any? %>
              <% @products.each do |product| %>
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                  <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                    <%= product.name %>
                  </th>
                  <td class="px-6 py-4">
                    <%= product.base_price %>
                  </td>
                  <td class="px-6 py-4">
                    <%= product.sizes.join(", ") %>
                  </td>
                  <td class="px-6 py-4">
                    <%= product.color_names %>
                  </td>
                  <td class="px-6 py-4 text-right">
                    <div class="flex items-center space-x-2">
                      <%= link_to "View", admin_product_path(product), class: "font-medium text-blue-600 dark:text-blue-500 hover:underline cursor-pointer", data: { turbo_frame: "_top" } %>
                      <%= link_to "Edit", edit_admin_product_path(product), class: "font-medium text-yellow-600 dark:text-yellow-500 hover:underline cursor-pointer", data: { turbo_frame: "_top" } %>
                      <%= link_to admin_product_path(product), 
                                  data: { 
                                    "turbo-method": :delete,
                                    "turbo-confirm": "Are you sure you want to delete this product?",
                                    "turbo-frame": "_top"
                                  },
                                  class: "font-medium text-red-600 dark:text-red-500 hover:underline" do %>
                        Delete
                      <% end %>
                    </div>
                  </td>
                </tr>
              <% end %>
            <% else %>
              <tr>
                <td colspan="5" class="px-6 py-8 text-center text-gray-500 dark:text-gray-400">
                  <div class="flex flex-col items-center justify-center">
                    <svg class="w-12 h-12 mb-4 text-gray-300 dark:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5 0a6 6 0 00-9-5.197"></path>
                    </svg>
                    <p class="text-lg font-medium">No products found</p>
                    <p class="text-sm">Get started by creating your first product.</p>
                  </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

      <!-- Pagy Pagination -->
      <% if @pagy && @pagy.pages > 1 %>
        <div class="border-t border-gray-200 dark:border-gray-700">
          <%= pagy_tailwind_nav(@pagy, link_extra: 'data-turbo-frame="products_list"').html_safe %>
        </div>
      <% end %>
    </div>
  </div>
<% end %>
